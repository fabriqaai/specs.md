# FIRE Flow Design Principles

## How Artifacts Are Generated

**Markdown artifacts are generated by the LLM agent, NOT by scripts.**

The agent:
1. Reads the SKILL.md for workflow instructions
2. Uses the `.hbs` template as a structural guide
3. Writes the markdown file directly

**Scripts are ONLY for state consistency operations** - updating `state.yaml` and multiple files atomically (e.g., `init-run.cjs`, `update-phase.cjs`, `complete-run.cjs`).

## What Scripts Are For

| Use Scripts For | Do NOT Use Scripts For |
|-----------------|------------------------|
| Updating state.yaml | Generating markdown artifacts |
| Atomic multi-file updates | Rendering templates |
| Run initialization | Walkthrough generation |
| Phase transitions | Plan generation |

## Correct Pattern

```
skill/
├── SKILL.md          # Workflow instructions for the agent
└── templates/
    └── artifact.md.hbs   # Template structure (agent fills this in)
```

## Incorrect Pattern (DO NOT DO THIS)

```
skill/
├── SKILL.md
├── templates/
│   └── artifact.md.hbs
└── scripts/
    └── render-artifact.ts   # WRONG - don't generate markdown with scripts
```

## Why This Matters

- FIRE is designed for LLM agents to generate content
- Templates are guides, not programmatic renderers
- Scripts add unnecessary complexity for markdown generation
- The agent has full context; a script would need that context passed to it

## Before Adding a Script

Ask: "Is this for state consistency across multiple files?"
- YES → Script is appropriate (use `.cjs`)
- NO → Let the agent generate it directly
